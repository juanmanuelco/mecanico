{"version":3,"sources":["../../src/pages/mapa-obtener/mapa-obtener.module.ts","../../src/pages/mapa-obtener/mapa-obtener.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AAUjD;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QARjC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,sEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;aAC1C;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZmB;AACqC;AAClC;AACyB;AAQjF;IAKE,yBACS,OAAsB,EACtB,SAAoB,EACnB,WAAwB,EACxB,SAA0B,EAC1B,OAA6B,EAC7B,QAAwB;QALzB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,gBAAW,GAAX,WAAW,CAAa;QACxB,cAAS,GAAT,SAAS,CAAiB;QAC1B,YAAO,GAAP,OAAO,CAAsB;QAC7B,aAAQ,GAAR,QAAQ,CAAgB;QAEhC,IAAI,CAAC,WAAW,GAAG,KAAK;IAC1B,CAAC;IACD,wCAAc,GAAd;QAAA,iBAsCC;QArCC,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YAC/G,IAAI,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC5C,IAAI,MAAM;YACV,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,CAAC,CAAC;gBAC3B,SAAS,GAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC;gBAC9B,MAAM,GAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5E,CAAC;YAAC,IAAI;gBACJ,MAAM,GAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC;YACrF,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS;YAC7E,KAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE;gBAC5D,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;gBACxC,iBAAiB,EAAE,KAAK;gBACxB,iBAAiB,EAAE,KAAK;aACzB,CAAC;YACF,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC5B,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE,UAAC,KAAK;gBAClC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;gBACvE,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE;gBAClE,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;gBACxB,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC9B,CAAC,CAAC;QACN,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK;YACZ,KAAI,CAAC,WAAW,GAAG,UAAU;YAC7B,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACpB,KAAK,EAAE,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBACpC,QAAQ,EAAE,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvC,OAAO,EAAE,CAAC;wBACR,IAAI,EAAE,SAAS;wBACf,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE,cAAI;4BACX,KAAI,CAAC,OAAO,CAAC,SAAS,EAAE;wBAC1B,CAAC;qBACF,CAAC;aACH,CAAC,CAAC,OAAO,EAAE,CAAC;QACf,CAAC,CAAC;IACJ,CAAC;IACD,yCAAe,GAAf,UAAgB,WAAW;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACnC,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM;YACvC,QAAQ,EAAE,WAAW;SACtB,CAAC,CAAC;IACL,CAAC;IACD,iCAAO,GAAP;QACE,IAAI,CAAC,QAAQ,CAAC,OAAO,CACnB,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,CAClC,CAAC;IACJ,CAAC;IAhEiB;QAAjB,yEAAS,CAAC,KAAK,CAAC;;uDAAY;IADlB,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;WACG;SACjC,CAAC;6EAO+B;YACX,8EAAS;YACN,sEAAW;YACb,kGAAe;YACjB,uEAAoB;YACnB,YAAc;OAXvB,eAAe,CAkE3B;IAAD,CAAC;AAAA;SAlEY,eAAe,gB","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MapaObtenerPage } from './mapa-obtener';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapaObtenerPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MapaObtenerPage),\r\n  ],\r\n})\r\nexport class MapaObtenerPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mapa-obtener/mapa-obtener.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { ValidacionesProvider } from '../../providers/validaciones/validaciones';\r\ndeclare var google: any;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-mapa-obtener',\r\n  templateUrl: 'mapa-obtener.html',\r\n})\r\nexport class MapaObtenerPage {\r\n  @ViewChild(\"map\") mapElement;\r\n  map: any;\r\n  marker: any;\r\n  geoposicion: any;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private geolocation: Geolocation,\r\n    private alertCtrl: AlertController,\r\n    private validar: ValidacionesProvider,\r\n    private viewCtrl: ViewController\r\n  ) {\r\n    this.geoposicion = '0,0'\r\n  }\r\n  ionViewDidLoad() {\r\n    this.geolocation.getCurrentPosition({ maximumAge: 3000, timeout: 5000, enableHighAccuracy: true }).then((resp_geo) => {\r\n      var pasCoords = this.navParams.get('puntos')\r\n      var coords\r\n      if (pasCoords != undefined) {\r\n        pasCoords=pasCoords.split(';')\r\n        coords= new google.maps.LatLng(Number(pasCoords[0]), Number(pasCoords[1]))\r\n      } else \r\n        coords= new google.maps.LatLng(resp_geo.coords.latitude, resp_geo.coords.longitude)\r\n      this.geoposicion = resp_geo.coords.latitude + \" ; \" + resp_geo.coords.longitude\r\n        this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n          center: coords,\r\n          zoom: 14,\r\n          mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n          fullscreenControl: false,\r\n          streetViewControl: false\r\n        })\r\n        this.cambioUbicacion(coords)\r\n        this.map.addListener('click', (event) => {\r\n          coords = new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())\r\n          this.geoposicion = event.latLng.lat() + \" ; \" + event.latLng.lng()\r\n          this.marker.setMap(null)\r\n          this.cambioUbicacion(coords)\r\n        })\r\n    }).catch(error => {\r\n      this.geoposicion = '0.0; 0.0'\r\n      this.alertCtrl.create({\r\n        title: this.validar.mensajes('E6').t,\r\n        subTitle: this.validar.mensajes('E6').d,\r\n        buttons: [{\r\n          text: 'Aceptar',\r\n          role: 'cancel',\r\n          handler: data => {\r\n            this.navCtrl.popToRoot()\r\n          }\r\n        }]\r\n      }).present();\r\n    })\r\n  }\r\n  cambioUbicacion(coordenadas) {\r\n    this.marker = new google.maps.Marker({\r\n      map: this.map,\r\n      animation: google.maps.Animation.BOUNCE,\r\n      position: coordenadas\r\n    });\r\n  }\r\n  dismiss() {\r\n    this.viewCtrl.dismiss(\r\n      { coordenadas: this.geoposicion }\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mapa-obtener/mapa-obtener.ts"],"sourceRoot":""}